/*!
 * Author: Tony Brix, me@tonybrix.info
 * License: MIT 
 * Description: Sort tables by clicking on headers
 */
(function(c,d){var b="tablesort";c[b]=function(f,e){var g;if(c(f).data(b)){g=c(f).data(b)}else{g=this;g.$table=c(f);g.$table.data(b,g)}if(typeof(e)==="object"||e===d){g._init(e)}else{if(typeof(e)==="string"&&e.substring(0,1)!=="_"&&typeof g[e]==="function"){g[e].apply(g,Array.prototype.slice.call(arguments,1))}else{throw"Invalid Arguments"}}};var a={_defaults:{sorttypes:{date:function(g,f){var h=new Date(g);var e=new Date(f);if(h<e){return -1}else{if(h>e){return 1}else{return 0}}},time:function(g,f){var j,e;var i=(g.substring(0,1)==="-");var h=(f.substring(0,1)==="-");if(i&&h){j=new Date("2000-01-01 "+f.substring(1));e=new Date("2000-01-01 "+g.substring(1))}else{if(i||h){j=+h;e=+i}else{j=new Date("2000-01-01 "+g);e=new Date("2000-01-01 "+f)}}if(j<e){return -1}else{if(j>e){return 1}else{return 0}}},number:function(g,f){var h=new Number(g.replace(/,/g,""));var e=new Number(f.replace(/,/g,""));if(h<e){return -1}else{if(h>e){return 1}else{return 0}}},string:function(g,f){var h=g.toLowerCase();var e=f.toLowerCase();if(h<e){return -1}else{if(h>e){return 1}else{return 0}}}}},_init:function(e){var f=this;if(f.initialized){throw"Already Initialized"}c.extend(e.sorttypes,f._defaults.sorttypes);f.options=c.extend({},f._defaults,e);f.$thead=c("thead",f.$table);f.$tbody=c("tbody",f.$table);f.$ths=c("tr th",f.$thead);f.$tds=c("tr td",f.$tbody);f.$rows=c("tr",f.$tbody);f.$table.addClass("tablesort");f.$ths.each(function(g){var j=c(this);var h="tablesort-"+g;j.addClass(h).data({column:h});f.$tds.filter(":nth-child("+(g+1)+")").addClass(h)}).wrapInner("<span class='tablesort-label' />").append("<span class='tablesort-arrows'><div><span class='tablesort-sortdesc'>&#9650;</span><span class='tablesort-sortasc'>&#9660;</span></div></span>").wrapInner("<div class='tablesort-th' />").on("click.tablesort",function(k){var n=c(this);if(n.hasClass("sortable")){var h=c(k.target);var j=f.$thead.data().sort||" ";var l=j.split(" ");var i=n.data().column;var o="asc";var g=n.data().sorttype||"string";if(h.hasClass("tablesort-sortdesc")||(l[0]===i&&l[1]==="asc"&&!h.hasClass("tablesort-sortasc"))){o="desc"}if(j===i+" "+o){return}f.$thead.data({sort:i+" "+o});if(l[0]){c("."+l[0]).removeClass("tablesort-"+l[1])}c("."+i).addClass("tablesort-"+o);var m=(o==="asc"?1:-1);f.$rows.sort(function(q,p){var s=c("."+i,q).text();var r=c("."+i,p).text();return m*f.options.sorttypes[g](s,r)}).appendTo(f.$tbody)}});f.initialized=true},destroy:function(){var e=this;e.$ths.off(".tablesort").each(function(f){var h=c(this);var g="tablesort-"+f;h.removeClass(g).unwrapInner("span.tablesort-th").unwrapInner("span.tablesort-label").find(".tablesort-arrows").remove();delete h.data().column;e.$tds.filter(":nth-child("+(f+1)+")").removeClass(g)});delete e.$table.data()[b]}};c[b].prototype=a;c.fn[b]=function(e){return this.each(function(){(new c[b](this,e))})};c(function(){var e=c("<style class='"+b+"-stylesheet'>.tablesort-arrows{display: none;}.sortable{cursor: pointer;}.sortable .tablesort-th{display: table;width: 100%;}.sortable .tablesort-arrows{display: table-cell;width: 1.1em;vertical-align: middle;}.sortable .tablesort-arrows div{position: relative;width: 1.1em;min-height: 2.2em;}.sortable .tablesort-label{display: table-cell;vertical-align: middle;}.sortable .tablesort-sortdesc, .sortable .tablesort-sortasc{position: absolute;right: 0px;color: #666;}.sortable .tablesort-sortdesc{top: 0px;}.sortable .tablesort-sortasc{top: 1em;}.sortable.tablesort-desc .tablesort-sortdesc, .sortable.tablesort-asc .tablesort-sortasc{color: #fff;}</style>");var f=c("head link[rel='stylesheet'], head style");if(f.length>0){f.eq(0).before(e)}else{c("head").append(e)}})})(jQuery);jQuery.fn.extend({unwrapInner:function(a){return this.each(function(){var b=this,d=$(b).children(a);if(d.length===1){d.contents().appendTo(b);d.remove()}})}});